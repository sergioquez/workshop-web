pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                script {
                    try {
                        echo "BUILD JOB"

                    }
                    catch (Exception e){
                        
                    }
                }
                
                
            }
        }
        stage('Tests') {
            steps {
                script{
                    try {
                        echo "TESTS JOB"
                    }
                    catch (Exception e){
                        
                    }
                   
                }
                
            }
        }
        stage('Deploy') {
            steps {
                script{
                    try{
                        
                       sh''' #!/bin/bash
                        pwd
                        echo " "
                        
                        scp -i ../../workshop.pem index.html ec2-user@3.145.84.147:/var/www/html/index.html

                        '''


                    }
                    catch (Exception e){

                    }
                   
                }
                
            }
        }
        

    }
    post { 
        always { 
            script{
                echo "Post always"
            }
            
        }
        
        success {
            script {
                echo "success"
            }
        }

        failure {
            script {
                echo "failure"
            }
            
        }

        unstable {
            script {
                echo "Unstable"
            }
        }
    }
}